<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Conversiones y Escalas de Temperatura — Termómetros Unificados</title>
<meta name="color-scheme" content="dark">
<style>
  :root{
    --bg: #0b0f14;
    --panel:#0f141b;
    --card: #121821;
    --text:#e5edf5;
    --muted:#a7b3c3;
    --accent:#6be0ff;
    --good:#9ff59f;
    --ring: rgba(107,224,255,.35);
    --radius: 16px;
    --shadow: 0 14px 40px rgba(0,0,0,.45);

    --term-height: 220px; /* altura del tubo */
    --term-width: 72px;

    --hot-threshold: 80;   /* umbral de “sparkle” en °C */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font: 500 16px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    letter-spacing:.2px;
  }

  header{ max-width:1100px; margin:32px auto 12px; padding:0 16px; }
  h1{
    margin:0 0 6px; font-size: clamp(22px, 3vw, 32px);
    font-weight:800; letter-spacing:.5px; color: var(--text);
  }
  .subtitle{ color:var(--muted); font-size:14px }

  .wrap{
    max-width:1100px; margin: 18px auto 28px; padding: 0 16px;
    display:grid; gap:22px; grid-template-columns: 1.2fr .8fr;
  }
  @media (max-width: 920px){ .wrap{ grid-template-columns: 1fr; } }

  /* Panel de termómetros */
  .thermos{
    background: linear-gradient(180deg,#0c1117,#0a0f14);
    border:1px solid #151c26; border-radius: var(--radius);
    box-shadow: var(--shadow); padding:18px;
  }
  .thermos-head{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    margin-bottom: 12px;
  }
  .badge{
    font-size:12px; color:#0b0f14; background:var(--accent); padding:6px 10px;
    border-radius:999px; font-weight:800; letter-spacing:.4px;
  }

  .thermo-grid{
    display:flex; justify-content:center; align-items:flex-end; gap:26px;
    padding:16px 8px 10px; position:relative;
    min-height: calc(var(--term-height) + 90px);
  }

  /* Cada termómetro */
  .thermo{
    width: var(--term-width);
    display:flex; flex-direction:column; align-items:center; gap:10px;
    user-select:none;
  }
  .unit{ font-weight:700; letter-spacing:.5px; font-size:14px; color:var(--muted); }
  .display{
    font: 900 18px ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background: #0e1420; border:1px solid #1a2230; border-radius:12px;
    padding:6px 10px; color: var(--text); min-width:88px; text-align:center;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  }

  .tube{
    width: 28px; height: var(--term-height); position:relative;
    border-radius: 14px; overflow:hidden;
    background: linear-gradient(180deg, #0c1117 0%, #0c1117 60%, #0a0f14 100%);
    box-shadow: inset 0 0 0 2px #1a2230, inset 0 0 12px rgba(0,0,0,.65), 0 8px 18px rgba(0,0,0,.35);
  }
  .mercury{
    position:absolute; left:0; right:0; bottom:0; height:0;
    background: #ff5a5a;
    transition: height .6s cubic-bezier(.22,1,.36,1), background .3s linear;
    box-shadow: inset 0 6px 14px rgba(255,255,255,.15), inset 0 -10px 18px rgba(0,0,0,.45);
  }
  .bulb{
    width: 44px; height: 44px; border-radius:999px; margin-top:10px;
    background: radial-gradient(60% 60% at 40% 40%, rgba(255,255,255,.12), transparent 60%) , #0c1117;
    border:2px solid #1a2230; position:relative;
    box-shadow: inset 0 0 18px rgba(0,0,0,.6), 0 6px 14px rgba(0,0,0,.35);
  }
  .bulb.hot{
    box-shadow:
      0 0 18px rgba(255,170,80,.25),
      0 0 36px rgba(255,170,80,.18),
      inset 0 0 20px rgba(255,170,80,.15),
      0 6px 14px rgba(0,0,0,.35);
  }

  /* Marcas/ticks (colocadas por JS) */
  .tick{
    position:absolute; left:0; right:0; height:1px; background:rgba(255,255,255,.08);
  }
  .tick::after{
    content: attr(data-label);
    position:absolute; right:-70px; top:-8px; font-size:12px; color:#8ea0b5;
    width:60px; text-align:left; pointer-events:none;
  }
  .tick[data-label="0 °C"], .tick[data-label="100 °C"]{ background:rgba(255,255,255,.16) }

  /* Panel de conversión */
  .panel{
    background: linear-gradient(180deg,#0c1117,#0a0f14);
    border:1px solid #151c26; border-radius: var(--radius);
    box-shadow: var(--shadow); padding:18px;
  }
  .row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:12px }
  .row-1{ grid-template-columns: 1fr; }
  label{ font-size:13px; color:var(--muted) }
  input, select, button{
    width:100%; padding:10px 12px; border-radius:12px; border:1px solid #1a2230;
    background:#0e1420; color:var(--text); outline: none;
  }
  input:focus, select:focus{ box-shadow: 0 0 0 4px var(--ring) }
  button{
    background: var(--accent); color:#0b0f14; font-weight:900; letter-spacing:.4px;
    border: none; cursor:pointer;
  }
  button:hover{ filter:brightness(1.05) }

  .results{ display:grid; grid-template-columns: repeat(3,1fr); gap:10px; }
  .pill{
    background:#0f1622; border:1px solid #1a2230; border-radius:12px; padding:10px;
    text-align:center; font: 800 14px/1 ui-monospace,monospace; color:var(--good);
  }
  .formulas{
    margin-top:16px; font-size:13px; color:var(--muted);
    border-top:1px dashed #1a2230; padding-top:12px;
  }
  .formula{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; color:#cfe5ff }

  footer{
    max-width:1100px; margin: 8px auto 36px; padding:0 16px; color:#93a6bc;
    display:flex; justify-content:center; align-items:center; font-size:13px;
  }
  .sig{ padding:8px 12px; border:1px solid #1a2230; border-radius:999px; background:#0f141b; }

  /* ==== SPARKLES (partículas en el bulbo) ==== */
  .sparkles{
    position:absolute; inset:0; pointer-events:none; opacity:0;
    transition: opacity .25s ease;
    filter: drop-shadow(0 0 4px rgba(255,180,90,.8));
    mix-blend-mode: screen;
  }
  .sparkles.active{ opacity:1; }
  .sparkles span{
    position:absolute; bottom:10px; left:50%;
    width:6px; height:6px; border-radius:50%;
    background: radial-gradient(circle at 50% 50%, #ffd7a3 15%, #ff9f4d 60%, rgba(0,0,0,0) 70%);
    transform: translateX(var(--x));
    animation: rise 1.6s linear infinite;
    animation-delay: var(--d);
    opacity:.9;
  }
  @keyframes rise{
    0%   { transform: translateX(var(--x)) translateY(12px) scale(.6); opacity: 0; }
    20%  { opacity: .9; }
    100% { transform: translateX(var(--x)) translateY(-24px) scale(1); opacity: 0; }
  }
</style>
</head>
<body>

<header>
  <h1>Conversiones y Escalas de Temperatura</h1>
  <div class="subtitle">Termómetros visualmente unificados (misma altura = misma temperatura física)</div>
</header>

<main class="wrap">
  <!-- TERMÓMETROS -->
  <section class="thermos" aria-label="Termómetros">
    <div class="thermos-head">
      <span class="badge">TERMÓMETROS</span>
      <small class="subtitle">Escala visual común: de −50 °C a 150 °C</small>
    </div>

    <div class="thermo-grid" id="thermoGrid">
      <!-- Celsius -->
      <div class="thermo">
        <div class="unit">Celsius</div>
        <div class="display" id="lcdC">0.00 °C</div>
        <div class="tube">
          <div class="mercury" id="nivelC"></div>
          <!-- ticks por JS -->
        </div>
        <div class="bulb" id="bulbC" aria-hidden="true"></div>
      </div>

      <!-- Fahrenheit -->
      <div class="thermo">
        <div class="unit">Fahrenheit</div>
        <div class="display" id="lcdF">32.00 °F</div>
        <div class="tube">
          <div class="mercury" id="nivelF"></div>
          <!-- ticks por JS -->
        </div>
        <div class="bulb" id="bulbF" aria-hidden="true"></div>
      </div>

      <!-- Kelvin -->
      <div class="thermo">
        <div class="unit">Kelvin</div>
        <div class="display" id="lcdK">273.15 K</div>
        <div class="tube">
          <div class="mercury" id="nivelK"></div>
          <!-- ticks por JS -->
        </div>
        <div class="bulb" id="bulbK" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- CONVERSOR -->
  <aside class="panel" aria-label="Calculadora de conversión">
    <div class="thermos-head" style="margin-bottom:10px">
      <span class="badge">CONVERSOR</span>
      <small class="subtitle">Ingresa una temperatura y su escala</small>
    </div>

    <div class="row">
      <div>
        <label for="valorTemp">Valor</label>
        <input id="valorTemp" type="number" step="0.01" value="25">
      </div>
      <div>
        <label for="escala">Escala</label>
        <select id="escala">
          <option value="C">°C — Celsius</option>
          <option value="F">°F — Fahrenheit</option>
          <option value="K">K — Kelvin</option>
        </select>
      </div>
    </div>
    <div class="row row-1">
      <button id="convertir" type="button">Convertir y Actualizar Termómetros</button>
    </div>

    <div class="results" aria-live="polite" aria-atomic="true">
      <div class="pill">°C: <span id="resC">25.00</span></div>
      <div class="pill">°F: <span id="resF">77.00</span></div>
      <div class="pill">K: <span id="resK">298.15</span></div>
    </div>

    <div class="formulas">
      <div><strong>Fórmulas:</strong></div>
      <div class="formula">°F = (°C × 9/5) + 32</div>
      <div class="formula">°C = (°F − 32) × 5/9</div>
      <div class="formula">K  = °C + 273.15</div>
      <div class="formula">°C = K − 273.15</div>
      <small>Nota: Kelvin no admite valores negativos (0 K es el cero absoluto).</small>
    </div>
  </aside>
</main>

<footer>
  <span class="sig">Rafael Moreno Bañaga</span>
</footer>

<script>
/* ======= Parámetros de la escala visual unificada ======= */
const TERM_HEIGHT = parseInt(getComputedStyle(document.documentElement)
                      .getPropertyValue('--term-height')) || 220;
const TERM_MIN_C = -50;
const TERM_MAX_C = 150;
const HOT_THRESHOLD = parseFloat(getComputedStyle(document.documentElement)
                      .getPropertyValue('--hot-threshold')) || 80;

const clamp = (x, a, b) => Math.min(b, Math.max(a, x));
const norm = (c) => (c - TERM_MIN_C) / (TERM_MAX_C - TERM_MIN_C);
const cToHeight = c => Math.round(clamp(norm(c), 0, 1) * TERM_HEIGHT);

/* ======= Coloreo suave según °C (frío→caliente) ======= */
function colorTemperatura(c){
  // mapeo −50..150 °C → 220°(azul) .. 0°(rojo)
  const t = clamp((c - TERM_MIN_C) / (TERM_MAX_C - TERM_MIN_C), 0, 1);
  const hue = 220 - 220 * t;
  return `hsl(${hue} 100% 55%)`;
}

/* ======= Ticks dentro de cada tubo ======= */
function addTicksToTube(tubeEl){
  const labels = [-50, 0, 100, 150];
  labels.forEach(val=>{
    const tick = document.createElement('div');
    tick.className = 'tick';
    const h = cToHeight(val);
    tick.style.bottom = `${h}px`;
    tick.dataset.label = `${val} °C`;
    tubeEl.appendChild(tick);
  });
}

/* ======= SPARKLES Helpers ======= */
function createSparkles(bulbEl, count=12){
  const container = document.createElement('div');
  container.className = 'sparkles';
  for(let i=0;i<count;i++){
    const s = document.createElement('span');
    // dispersión horizontal y retraso aleatorio
    const x = (Math.random()*28 - 14).toFixed(1) + 'px';
    const d = (Math.random()*1.2).toFixed(2) + 's';
    s.style.setProperty('--x', x);
    s.style.setProperty('--d', d);
    container.appendChild(s);
  }
  bulbEl.appendChild(container);
  return container;
}

function toggleHeatEffects(celsius){
  const active = celsius >= HOT_THRESHOLD;
  [bulbC, bulbF, bulbK].forEach((bulb, idx)=>{
    bulb.classList.toggle('hot', active);
    sparkRefs[idx].classList.toggle('active', active);
  });
}

/* ======= DOM refs ======= */
const valorTemp = document.getElementById("valorTemp");
const escala = document.getElementById("escala");
const resC = document.getElementById("resC");
const resF = document.getElementById("resF");
const resK = document.getElementById("resK");

const nivelC = document.getElementById("nivelC");
const nivelF = document.getElementById("nivelF");
const nivelK = document.getElementById("nivelK");

const lcdC = document.getElementById("lcdC");
const lcdF = document.getElementById("lcdF");
const lcdK = document.getElementById("lcdK");

const bulbC = document.getElementById("bulbC");
const bulbF = document.getElementById("bulbF");
const bulbK = document.getElementById("bulbK");

/* Añadir ticks a todos los tubos */
document.querySelectorAll('.tube').forEach(addTicksToTube);

/* Crear sparkles en cada bulbo (inicialmente ocultos) */
const sparkRefs = [
  createSparkles(bulbC, 12),
  createSparkles(bulbF, 12),
  createSparkles(bulbK, 12)
];

/* ======= Lógica principal: una sola altura desde °C ======= */
function actualizarTermometrosDesdeC(c){
  const h = cToHeight(c);
  const col = colorTemperatura(c);

  [nivelC, nivelF, nivelK].forEach(n=>{
    n.style.height = h + "px";
    n.style.background = col;
  });

  toggleHeatEffects(c);
}

function updateConversor(){
  let valor = parseFloat(valorTemp.value);
  if (Number.isNaN(valor)) return;

  let c,f,k;

  if (escala.value === "C") {
    c = valor;
    k = c + 273.15;
    f = (c * 9/5) + 32;
  } else if (escala.value === "F") {
    f = valor;
    c = (f - 32) * 5/9;
    k = c + 273.15;
  } else { // Kelvin
    if (valor < 0) valor = 0; // clamp físico
    k = valor;
    c = k - 273.15;
    f = (c * 9/5) + 32;
  }

  // Mostrar valores numéricos
  resC.textContent = c.toFixed(2);
  resF.textContent = f.toFixed(2);
  resK.textContent = k.toFixed(2);

  lcdC.textContent = `${c.toFixed(2)} °C`;
  lcdF.textContent = `${f.toFixed(2)} °F`;
  lcdK.textContent = `${k.toFixed(2)} K`;

  // Misma altura/Color en los tres termómetros + efecto calor
  actualizarTermometrosDesdeC(c);
}

/* ======= Eventos ======= */
document.getElementById("convertir").addEventListener("click", updateConversor);
valorTemp.addEventListener("input", updateConversor);
escala.addEventListener("change", updateConversor);

/* Estado inicial */
updateConversor();
</script>
</body>
</html>
